"use strict";
class RipplesEvent{static option={spreadTime:.15,visibleTime:.05,hiddenTime:.2,touchWaitTime:.1,color:"#000000",opacity:.5,blur:10,startScale:.2,endScale:1,cubicBezier:[.215,.61,.355,1]};static start(e,t,i){let l=e.getBoundingClientRect();t-=l.left,i-=l.top;let s=t/l.width,n=i/l.height;s-=.5,n-=.5,s*=2,n*=2;let a=document.createElement("div");a.classList.add("ripples_element_wrap"),a.style.width="100%",a.style.height="100%",a.style.position="absolute",a.style.top="0px",a.style.left="0px",a.style.zIndex=2147483647,a.style.pointerEvents="none",a.style.display="flex",a.style.justifyContent="center",a.style.alignItems="center",a.style.overflow="hidden",a.style.transition="opacity "+this.option.visibleTime+"s",a.style.opacity=0;let o=document.createElement("div");o.style.backgroundColor=this.option.color,o.style.borderRadius="50%",o.style.opacity=this.option.opacity,o.style.filter="blur("+this.option.blur+"px)",o.style.transform="scale("+this.option.startScale+")",o.style.transition="transform "+this.option.spreadTime+"s, opacity "+this.option.hiddenTime+"s",o.style.transitionTimingFunction="cubic-bezier("+this.option.cubicBezier.join(", ")+")";let r=Math.abs(l.width*s),p=Math.abs(l.height*n),d=l.width+r,c=l.height+p,h=this.distanceTo(0,0,d,c);o.style.minWidth=h+2*this.option.blur+"px",o.style.minHeight=h+2*this.option.blur+"px",o.style.marginTop=l.height*n+"px",o.style.marginLeft=l.width*s+"px",a.appendChild(o),e.appendChild(a),o.setAttribute("start_time",new Date().getTime()),window.requestAnimationFrame(()=>{a.style.opacity=1,o.style.transform="scale("+this.option.endScale+")"})}static end(e){let t=new Date().getTime(),i=e.getElementsByClassName("ripples_element_wrap");for(let l=0;l<i.length;l++){let s=i[l],n=s.children[0],a=n.getAttribute("hide");if(!0!=a&&"true"!=a){n.setAttribute("hide",!0);let o=(t-Number.parseInt(n.getAttribute("start_time")))/1e3,r=this.option.spreadTime-o;r<0&&(r=0),setTimeout(()=>{n.style.opacity=0,setTimeout(()=>{s.remove()},1e3*this.option.hiddenTime)},1e3*r)}}}static distanceTo(e,t,i,l){return Math.sqrt(Math.pow(i-e,2)+Math.pow(l-t,2))}}class RipplesElement extends HTMLElement{constructor(){super()}connectedCallback(){if(1!=this.children.length){console.error("ripples-element의 자식 요소는 1개이여야 합니다.");return}let e=this.getElementsByClassName("ripples_element_wrap");for(let t=0;t<e.length;t++)e[t].remove(),t--;let i=this.children[0];this.addEventListener("mousedown",e=>{l?l=!1:RipplesEvent.start(i,e.clientX,e.clientY)}),this.addEventListener("mouseup",()=>{RipplesEvent.end(i)}),this.addEventListener("mouseleave",()=>{RipplesEvent.end(i)});let l=!1,s=null,n=null;function a(){null!=s&&(clearTimeout(s),s=null,n=null),RipplesEvent.end(i)}function o(e,t){null!=s&&(clearTimeout(s),s=null,n=null),s=setTimeout(()=>{RipplesEvent.start(i,e.touches[0].clientX,e.touches[0].clientY),s=null,n=null},1e3*t)}this.addEventListener("touchstart",e=>{l=!0,n=e,o(e,RipplesEvent.option.touchWaitTime)},{passive:!0}),this.addEventListener("touchend",()=>{RipplesEvent.end(i),null!=n&&o(n,0)},{passive:!0}),this.addEventListener("touchcancel",()=>{a()},{passive:!0}),this.addEventListener("touchmove",()=>{a()},{passive:!0})}}window.customElements.define("ripples-element",RipplesElement),(()=>{let e=document.createElement("style");e.appendChild(document.createTextNode(`
    ripples-element {
        position: relative;
    }
    ripples-element > * {
        position: relative;
        overflow: hidden;
    }
`)),document.head.appendChild(e);let t=!1,i=document.head.getElementsByTagName("meta");for(let l=0;l<i.length;l++){let s=i[l];if("viewport"===s.getAttribute("name")){let n=s.getAttribute("content").split(",").map(e=>{let[t,i]=e.split("=");return t=t.trim(),i=i.trim(),{key:t,value:i}});function a(e,t){for(let i=0;i<n.length;i++)if(n[i].key==e){n[i].value=t;break}n.push({key:e,value:t})}a("initial-scale","1.0"),a("user-scalable","no");let o=n.map(e=>`${e.key}=${e.value}`);s.setAttribute("content",o.join(", ")),t=!0;break}}if(!t){let r=document.createElement("meta");r.setAttribute("name","viewport"),r.setAttribute("content","initial-scale=1.0, user-scalable=no"),document.head.appendChild(r)}})();